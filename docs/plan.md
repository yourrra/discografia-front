# План реализации MVP

## Текущее состояние проекта (по структуре)

1. В корне есть базовая инфраструктура Vite/React/TypeScript, линтеры и форматтеры.
2. В `src` заполнен в основном слой `app` и часть `shared`.
3. Папки `src/pages`, `src/features`, `src/widgets` пока пустые (файлов нет).
4. В `src/entities` есть только заготовка `tshirts/*`, но доменной модели страниц для Terminal/Canvas нет.
5. Роутер сейчас в нерабочем состоянии: `src/shared/config/routerConfig/routerConfig.tsx` содержит заглушки и импорты отсутствующих страниц.
6. В `package.json` пока нет ключевых библиотек для MVP (`xterm.js`, `@xyflow/react`, PWA-плагин).
7. `docs/plan.md` и `docs/arch-rules.md` были пустыми.

## Последовательный план задач

1. [ ] Привести проект в компилируемое состояние.
       Коротко: убрать битые импорты/заглушки роутера, чтобы `npm run build` проходил и была стабильная стартовая точка.

2. [ ] Зафиксировать архитектурные правила в документации.
       Коротко: заполнить `docs/arch-rules.md` актуальными правилами слоев, зависимостей и контрактов (Terminal/Canvas через общий домен).

3. [ ] Подключить зависимости MVP.
       Коротко: добавить `xterm`, `@xyflow/react`, `zustand` middleware при необходимости, и PWA-решение для Vite (например `vite-plugin-pwa`).

4. [ ] Создать доменную модель страниц в `src/entities`.
       Коротко: описать типы `PageId`, `Page`, `PageLink`, `PageGraph` и публичные экспорты через `index.ts`.

5. [ ] Реализовать источник данных страниц (MVP-локальный).
       Коротко: добавить seed-данные страниц/ссылок на русском языке и репозиторий чтения (`pageRepository`).

6. [ ] Реализовать общий контракт навигации.
       Коротко: добавить `navigate`, `getCurrentPage`, `resolve/prefetch` (опционально) в отдельный модуль, не зависящий от UI.

7. [ ] Добавить навигационный стор (Zustand) с узкими границами.
       Коротко: хранить только текущую страницу, историю переходов и служебные флаги без "god-store".

8. [ ] Синхронизировать навигацию с URL.
       Коротко: завести маршруты `/terminal/:pageId?` и `/canvas/:pageId?`, обеспечить deep-link и корректный fallback.

9. [ ] Создать shell-страницы в `src/pages`.
       Коротко: `TerminalShellPage` и `CanvasShellPage` как точки сборки фич и подключения провайдеров/сервисов.

10. [ ] Реализовать фичу Terminal: движок команд.
        Коротко: парсер/диспетчер команд `help`, `list`, `open <pageId>`, `clear` и единый формат ответа.

11. [ ] Реализовать фичу Terminal: UI на xterm.js.
        Коротко: ввод команд, история вверх/вниз, быстрый вывод, автофокус, автоскролл, отсутствие посимвольных React-ререндеров.

12. [ ] Реализовать терминальный рендер страниц.
        Коротко: вывод заголовка/контента/ссылок одной и той же доменной страницы в терминальном формате.

13. [ ] Реализовать фичу Canvas: граф страниц.
        Коротко: адаптер `Page -> Node/Edge`, мемоизация `nodeTypes` и обработчиков, минимальные пересчеты графа.

14. [ ] Реализовать Canvas-полотно на `@xyflow/react`.
        Коротко: pan/zoom, карточки узлов (страниц), клики по ссылкам с вызовом общего `navigate`.

15. [ ] Добавить перемещение камеры и появление новых узлов.
        Коротко: при переходе по ссылке центрировать камеру на целевом узле; если узла нет - создать и показать с анимацией.

16. [ ] Привести тексты и i18n к требованиям проекта.
        Коротко: все пользовательские тексты на русском; для i18n ключом использовать полную русскую фразу.

17. [ ] Реализовать PWA-слой.
        Коротко: manifest, иконки, service worker, базовый офлайн-сценарий (запуск приложения и доступ к базовым страницам).

18. [ ] Усилить доступность и адаптивность обоих интерфейсов.
        Коротко: фокус-стили, клавиатурная навигация, читаемость, корректная работа на мобильных/планшетах.

19. [ ] Провести оптимизацию производительности.
        Коротко: проверить горячие пути Terminal и Canvas (ввод, pan/zoom), устранить лишние ререндеры и тяжелые вычисления в рендере.

20. [ ] Добавить тесты на критические сценарии.
        Коротко: юнит-тесты команд/навигации/репозитория и интеграционные проверки основных пользовательских потоков.

21. [ ] Финальный quality gate перед merge.
        Коротко: `npm run lint`, `npm run fmt`, `npm run lint:css`, `npm run build` + ручная проверка Terminal/Canvas/deep-link/PWA.
